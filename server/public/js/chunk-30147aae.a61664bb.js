(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30147aae"],{"0220":function(t,e,r){"use strict";var n=r("9899"),o=r.n(n);o.a},2375:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"bouncing-loader"},[r("div"),r("div"),r("div")])])}],a=(r("0220"),r("2877")),i={},s=Object(a["a"])(i,n,o,!1,null,"bd456636",null);e["a"]=s.exports},2594:function(t,e,r){"use strict";var n=r("5831"),o=r.n(n);o.a},"4c19":function(t,e,r){},5831:function(t,e,r){},"605f":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Navbar"),r("br"),r("br"),r("br"),t.isLoading?r("Spinner"):r("AdminCreateForm",{attrs:{"initial-user":t.user},on:{"after-submit":t.handleAfterSubmit}})],1)},o=[],a=(r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4"),r("e01a"),r("d28b"),r("3ca3"),r("ddb0"),r("b636"),r("944a"),r("0c47"),r("23dc"),r("3410"),r("b0c0"),r("131a"),r("fb6a"),r("53ca")),i=r("1da1"),s=r("ade3"),c=r("2f62"),u=r("d178"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("form",{staticClass:"w-100",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._m(0),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"name"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",placeholder:"name",required:"",autofocus:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"email"}},[t._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password"}},[t._v("Password")]),r("span",{staticClass:"warning",style:{visibility:t.passwordHint?"visible":"hidden"}},[t._v("The password length should be greater than 8.")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password-check"}},[t._v("Password Check")]),r("span",{staticClass:"warning",style:{visibility:t.passwordCheckHint?"visible":"hidden"}},[t._v("Does not match the password above.")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.passwordCheck,expression:"user.passwordCheck"}],staticClass:"form-control",attrs:{id:"password-check",name:"passwordCheck",type:"password",placeholder:"Password",required:""},domProps:{value:t.user.passwordCheck},on:{input:function(e){e.target.composing||t.$set(t.user,"passwordCheck",e.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"isAdmin"}},[t._v("Admin?")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.user.isAdmin,expression:"user.isAdmin"}],staticClass:"form-control",attrs:{name:"isAdmin",id:"isAdmin"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"isAdmin",e.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:"",value:"1"}},[t._v("Yes")]),r("option",{attrs:{value:"0"}},[t._v("No")])])]),r("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(t._s(t.isProcessing?"Processing...":"Save"))]),r("router-link",{attrs:{to:"/admin/users"}},[r("button",{staticClass:"btn btn-lg btn-block btn-outline-dark",attrs:{type:"button"}},[t._v("Back")])])],1)])},f=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center mb-4"},[r("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Edit User")])])}],h=r("2fa3");function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(P){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),i=new _(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=x(i,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=u;var f={};function h(){}function p(){}function v(){}var m={};c(m,o,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(E([])));g&&g!==e&&r.call(g,o)&&(m=g);var y=v.prototype=h.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,s,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,h=f.value;return h&&"object"==Object(a["a"])(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){f.value=t,s(f)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=v,c(y,"constructor",v),c(v,"constructor",p),p.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},w(O.prototype),c(O.prototype,i,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m={name:"AdminEditForm",props:{initialUser:{type:Object,default:function(){return{name:"",email:"",password:"",passwordCheck:"",isAdmin:-2}}}},data:function(){return{user:{id:-1,name:"",password:"",passwordCheck:"",isAdmin:-1},isProcessing:!1,passwordHint:!1,passwordCheckHint:!1}},created:function(){this.user=v(v({},this.user),this.initialUser)},computed:v({},Object(c["b"])(["currentUser","isAuthenticated"])),methods:{handleSubmit:function(t){var e=this;return Object(i["a"])(d().mark((function r(){var n,o;return d().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,e.isProcessing=!0,e.user.name&&e.user.email&&e.user.password&&e.user.passwordCheck&&e.user.isAdmin){r.next=6;break}return h["a"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),e.isProcessing=!1,r.abrupt("return");case 6:if(e.user.password===e.user.passwordCheck){r.next=11;break}return h["a"].fire({icon:"warning",title:"兩次輸入的密碼不同，請確認"}),e.user.passwordCheck="",e.isProcessing=!1,r.abrupt("return");case 11:if(!(e.user.password.length<8)){r.next=16;break}return h["a"].fire({icon:"warning",title:"密碼長度需大於8"}),e.user.passwordCheck="",e.isProcessing=!1,r.abrupt("return");case 16:if(-1!==e.user.isAdmin){r.next=22;break}return h["a"].fire({icon:"warning",title:"請選擇權限"}),e.user.isAdmin=-1,e.user.passwordCheck="",e.isProcessing=!1,r.abrupt("return");case 22:n=t.target,o=new FormData(n),e.$emit("after-submit",o),r.next=31;break;case 27:r.prev=27,r.t0=r["catch"](0),h["a"].fire({icon:"error",title:r.t0}),e.isProcessing=!1;case 31:case"end":return r.stop()}}),r,null,[[0,27]])})))()}},watch:{initialUser:function(t){this.user=v(v({},this.user),t),this.user.isAdmin=-1},user:{handler:function(){this.user.password!==this.user.passwordCheck?this.passwordCheckHint=!0:this.passwordCheckHint=!1,this.user.password.length<8?this.passwordHint=!0:this.passwordHint=!1,this.user.password!==this.user.passwordCheck?this.passwordCheckHint=!0:this.passwordCheckHint=!1},deep:!0}}},b=m,g=(r("712d"),r("2877")),y=Object(g["a"])(b,l,f,!1,null,"0806cd1d",null),w=y.exports,O=r("be6c"),x=r("2375");function j(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(P){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),i=new _(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=O(i,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=u;var f={};function h(){}function d(){}function p(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(E([])));b&&b!==e&&r.call(b,o)&&(v=b);var g=p.prototype=h.prototype=Object.create(v);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,s,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,h=f.value;return h&&"object"==Object(a["a"])(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(h).then((function(t){f.value=t,s(f)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=p,c(g,"constructor",p),c(p,"constructor",d),d.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var E={name:"AdminEditUser",inject:["reload"],components:{Navbar:u["a"],AdminCreateForm:w,Spinner:x["a"]},data:function(){return{user:{id:-1,name:"",isAdmin:-1},isLoading:!0}},computed:_({},Object(c["b"])(["currentUser","isAuthenticated"])),created:function(){var t=this.$route.params.id;this.fetchUser(t)},methods:{fetchUser:function(t){var e=this;return Object(i["a"])(j().mark((function r(){var n,o,a;return j().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O["a"].getUser({userId:t});case 3:if(n=r.sent,o=n.data,a=n.statusText,"OK"===a){r.next=7;break}throw new Error(o.message);case 7:e.user=o.user,e.isLoading=!1,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),e.isLoading=!1,h["a"].fire({icon:"error",title:r.t0});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},handleAfterSubmit:function(t){var e=this;return Object(i["a"])(j().mark((function r(){var n,o,a,i;return j().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,n=e.user.id,r.next=4,O["a"].putUser({formData:t,userId:n});case 4:if(o=r.sent,a=o.data,i=o.statusText,"OK"===i&&"success"===a.status){r.next=9;break}throw new Error(a.message);case 9:h["a"].fire({icon:"success",title:"更新使用者成功"}),e.$router.push("/admin/users"),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),h["a"].fire({icon:"error",title:r.t0}),e.reload();case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}}},L=E,P=Object(g["a"])(L,n,o,!1,null,null,null);e["default"]=P.exports},"712d":function(t,e,r){"use strict";var n=r("4c19"),o=r.n(n);o.a},9899:function(t,e,r){},be6c:function(t,e,r){"use strict";var n=r("2fa3"),o=function(){return localStorage.getItem("token")};e["a"]={getUsers:function(){return n["b"].get("/admin/users",{headers:{Authorization:"Bearer ".concat(o())}})},getUser:function(t){var e=t.userId;return n["b"].get("admin/users/".concat(e),{headers:{Authorization:"Bearer ".concat(o())}})},postUser:function(t){var e=t.formData;return n["b"].post("/admin/users/create",e,{headers:{Authorization:"Bearer ".concat(o())}})},putUser:function(t){var e=t.formData,r=t.userId;return n["b"].put("/admin/users/edit/".concat(r),e,{headers:{Authorization:"Bearer ".concat(o())}})},putRole:function(t){var e=t.userId;return n["b"].put("/admin/users/".concat(e,"/put-role"),{},{headers:{Authorization:"Bearer ".concat(o())}})},deleteUser:function(t){var e=t.userId;return n["b"].delete("/admin/users/".concat(e),{headers:{Authorization:"Bearer ".concat(o())}})}}},d178:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark"},[r("router-link",{staticClass:"navbar-brand",attrs:{to:"/chatroom"}},[t._v("Chatroom")]),t._m(0),r("div",{staticClass:"navbar-collapse collapse navbar-center",attrs:{id:"navbarSupportedContent"}},[r("div",{staticClass:"ml-auto d-flex align-items-center navbar-collapse-center"},[t.currentUser.isAdmin?r("router-link",{attrs:{id:"admin",to:"/admin/users"}},[r("h4",[t._v("管理員後台")])]):t._e(),r("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{id:"logout",type:"button"},on:{click:t.logout}},[r("h5",[t._v("登出")])]),r("a",{attrs:{target:"_blank",href:"https://github.com/andy922200/chatroom-nodejs-vue"}},[r("font-awesome-icon",{attrs:{icon:["fab","github"]}})],1)],1)])],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})])}],a=(r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4"),r("ade3")),i=(r("b0c0"),r("2f62")),s=r("2fa3");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={name:"Navbar",computed:u({},Object(i["b"])(["currentUser","isAuthenticated"])),methods:{logout:function(){this.$socket.emit("offlineHint",this.currentUser.name),this.$store.commit("revokeAuthentication"),this.$router.push("/signin"),s["a"].fire({icon:"success",title:"成功登出"})}}},f=l,h=(r("2594"),r("2877")),d=Object(h["a"])(f,n,o,!1,null,"c0727d0c",null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-30147aae.a61664bb.js.map